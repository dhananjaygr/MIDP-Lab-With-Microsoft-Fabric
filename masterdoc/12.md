# Building reports in Microsoft Fabric

In this exercise, you will create a Power BI data model and create a report from scratch.

## Build a report
Power BI is natively integrated in the whole Fabric experience. This native integration brings a unique mode, called DirectLake, of accessing the data from the lakehouse to provide the most performant query and reporting experience. DirectLake mode is a groundbreaking new engine capability to analyze very large datasets in Power BI. The technology is based on the idea of loading parquet-formatted files directly from a data lake without having to query a data warehouse or lakehouse endpoint, and without having to import or duplicate data into a Power BI dataset. DirectLake is a fast path to load the data from the data lake straight into the Power BI engine, ready for analysis.

In traditional DirectQuery mode, the Power BI engine directly queries the data from the source for each query execution, and the query performance depends on the data retrieval speed. DirectQuery eliminates the need to copy data, ensuring that any changes in the source are immediately reflected in query results. On the other hand, in the import mode, the performance is much better because the data is readily available in memory without having to query the data from the source for each query execution, however the Power BI engine must first copy the data into the memory at data refresh time. Any changes to the underlying data source are picked up during the next data refresh(in scheduled as well as on-demand refresh).

DirectLake mode now eliminates this import requirement by loading the data files directly into memory. Because there's no explicit import process, it's possible to pick up any changes at the source as they occur, thus combining the advantages of DirectQuery and import mode while avoiding their disadvantages. DirectLake mode is therefore the ideal choice for analyzing very large datasets and datasets with frequent updates at the source.

1. From your wwilakehouse lakehouse, select New power BI dataset.

    ![01](../media/12/1a.png)

2. Select these tables and click on confirm: 

   - **fact_sale**
   - **dimension_city**
   - **dimension_stock_item**
   - **dimension_employee**
   - **dimension_customer**
   - **dimension_date**

![02](../media/12/2b.png)

3. For this data model, you need to define the relationship between different tables so that you can create reports and visualizations based on data coming across different tables. From the **fact_sale** table, drag the **CityKey** field and drop it on the **CityKey** field in the **dimension_city** table to create a relationship. The **Create Relationship** dialog box appears.

   ![03](../media/12/03.png)

4. In the **Create Relationship** dialog box:
   
- Table 1 is populated with **fact_sale** and the column of CityKey.
- Table 2 is populated with **dimension_city** and the column of CityKey.
- Cardinality: **Many to one (*:1)**
- Cross filter direction: **Single**
- Leave the box next to **Make this relationship active** selected.
- Select the box next to **Assume referential integrity.**
- Select **Confirm.**
  
   ![04](../media/12/04.png)

   > **Note**: When defining relationships for this report, make sure you have a many to one relationship from the **fact_sale** table (Table 1) to the dimension_* tables (Table 2) and not vice versa.

5. Next, add these relationships with the same **Create Relationship** settings as shown above but with the following tables and columns:

- StockItemKey(fact_sale) - StockItemKey(dimension_stock_item)
- Salespersonkey(fact_sale) - EmployeeKey(dimension_employee)
- CustomerKey(fact_sale) - CustomerKey(dimension_customer)
- InvoiceDateKey(fact_sale) - Date(dimension_date)
- After you add these relationships, your data model is ready for reporting as shown in the following image:

   After you add these relationships, your data model is ready for reporting as shown in the following image:

   ![05](../media/12/05.png)


6. Select **New report** to start creating reports/dashboards in Power BI. On the Power BI report canvas, you can create reports to meet your business requirements by dragging required columns from the **Data** pane to the canvas and using one or more of available visualizations.

   ![06](../media/12/06.png)


7. Add a title:

   - In the Ribbon, select **Text box(1)**.

   - Type in **WW Importers Profit Reporting(2)**.

   - Highlight the text and increase size to **20(3)** and place in the upper left of the report page.

   ![](../media/12/06a.png)

8. Add a Card:

   - On the **Data** pane, expand **fact_sales** and check the box next to **Profit**. This selection creates a column chart and adds the field to the Y-axis.

   - With the bar chart selected, select the **Card** visual in the visualization pane. This selection converts the visual to a card.

   - Place the card under the title.

   ![07](../media/12/07.png)

9. Add a Bar chart:

   - On the **Data** pane, expand **fact_sales** and check the box next to **Profit**. This selection creates a column chart and adds the field to the Y-axis.

   - On the **Data** pane, expand **dimension_city** and check the box for **SalesTerritory**. This selection adds the field to the Y-axis.

   - With the bar chart selected, select the **Clustered bar chart** visual in the visualization pane. This selection converts the column chart into a bar chart.

   ![08](../media/12/08.png)

   - Resize the Bar chart to fill in the area under the title and Card.

   ![09](../media/12/09.png)


10. Click anywhere on the blank canvas (or press the Esc key) so the bar chart is no longer selected.

11. Build a stacked area chart visual:

    -  On the **Visualizations** pane, select the **Stacked area chart** visual.

     ![10](../media/12/10.png)

    - Reposition and resize the stacked area chart to the right of the card and bar chart visuals created in the previous steps.

    - On the **Data** pane, expand **fact_sales** and check the box next to **Profit**. Expand dimension_date and check the box next to **FiscalMonthNumber**. This selection creates a filled line chart showing profit by fiscal month.

    - On the **Data** pane, expand **dimension_stock_item** and drag **BuyingPackage** into the Legend field well. This selection adds a line for each of the Buying Packages.

    ![11](../media/12/11.png)


12. Click anywhere on the blank canvas (or press the Esc key) so the stacked area chart is no longer selected.

13. Build a column chart:
    - On the **Visualizations** pane, select the **Stacked column chart** visual.

    ![12](../media/12/12.png)

    - On the **Data** pane, expand **fact_sales** and check the box next to **Profit**. This selection adds the field to the Y-axis.

    - On the **Data** pane, expand **dimension_employee** and check the box next to **Employee**. This selection adds the field to the X-axis.

    ![13](../media/12/13.png)
 
14. Click anywhere on the blank canvas (or press the Esc key) so the chart is no longer selected.

15. From the ribbon, select **File > Save**.

16. Enter the name of your report as **Profit Reporting**.

17. Select **Save**.

    ![14](../media/12/save-report-fabric.png)


